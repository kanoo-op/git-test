<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PostureView - 임상 자세 분석</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <script>
        // Apply saved theme before paint to prevent flash
        (function(){var t=localStorage.getItem('postureview_theme');if(t==='dark')document.documentElement.setAttribute('data-theme','dark');})();
    </script>
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-content">
            <div class="loading-icon">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/>
                    <circle cx="12" cy="12" r="3"/>
                </svg>
            </div>
            <h1 class="loading-title">PostureView</h1>
            <p class="loading-subtitle">임상 해부학 뷰어</p>
            <div class="progress-container">
                <div class="progress-bar">
                    <div id="progress-bar-fill" class="progress-bar-fill"></div>
                </div>
                <div class="progress-info">
                    <span id="progress-percent">0%</span>
                    <span id="progress-text">모델 로딩 준비 중...</span>
                </div>
            </div>
            <p class="loading-tip">팁: 마우스 휠로 확대/축소, 클릭 + 드래그로 회전</p>
        </div>
        <div id="protocol-warning" class="protocol-warning" style="display:none;">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/>
                <line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
            <span>로컬 서버가 필요합니다. 실행: <code>npx serve .</code> 또는 <code>python -m http.server 8000</code></span>
        </div>
    </div>

    <!-- Skip Link (Accessibility) -->
    <a href="#app" class="skip-link">메인 콘텐츠로 건너뛰기</a>

    <!-- PIN Lock Overlay -->
    <div id="pin-overlay" class="pin-overlay" style="display:none;">
        <div class="pin-card">
            <h2>PostureView</h2>
            <p>환자 데이터 보호를 위해 PIN을 입력하세요</p>
            <input type="password" id="pin-input" class="pin-input" maxlength="4" inputmode="numeric" pattern="[0-9]*" placeholder="••••" autocomplete="off">
            <div class="pin-error" id="pin-error"></div>
            <div class="pin-actions">
                <button id="btn-pin-submit" class="btn-primary">확인</button>
                <button id="btn-pin-setup" class="btn-secondary" style="display:none;">PIN 설정</button>
            </div>
        </div>
    </div>

    <!-- Login Overlay -->
    <div id="login-overlay" class="login-overlay" style="display:none;">
        <div class="login-card">
            <h2>PostureView</h2>
            <p>로그인하여 시작하세요</p>
            <div class="login-error" id="login-error" style="display:none;"></div>
            <div class="form-group">
                <label for="login-username">사용자명</label>
                <input type="text" id="login-username" placeholder="사용자명" autocomplete="username">
            </div>
            <div class="form-group">
                <label for="login-password">비밀번호</label>
                <input type="password" id="login-password" placeholder="비밀번호" autocomplete="current-password">
            </div>
            <button id="btn-login-submit" class="btn-primary" style="width:100%;margin-top:8px;">로그인</button>
        </div>
    </div>

    <!-- App Container -->
    <div id="app" class="app" style="display:none;">
        <!-- Mobile Hamburger -->
        <button id="hamburger-btn" class="hamburger-btn" aria-label="메뉴 열기">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
        </button>
        <div id="sidebar-overlay" class="sidebar-overlay"></div>

        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar" role="navigation" aria-label="주요 네비게이션">
            <div class="sidebar-header">
                <div class="logo">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83"/>
                    </svg>
                    <span class="logo-text">PostureView</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <div class="section-label">메뉴</div>
                <button class="nav-item active" data-view="dashboard">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
                    <span>대시보드</span>
                </button>
                <button class="nav-item" data-view="patients">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                    <span>환자 관리</span>
                </button>
                <button class="nav-item" data-view="posture">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a3 3 0 100 6 3 3 0 000-6z"/><path d="M12 8v8"/><path d="M9 22l3-6 3 6"/><path d="M6 13l6-1 6 1"/></svg>
                    <span>자세 분석</span>
                </button>
                <button class="nav-item" data-view="viewer">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                    <span>3D 뷰어</span>
                </button>
                <button class="nav-item" data-view="soap-records">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
                    <span>치료 기록</span>
                </button>
                <button class="nav-item" data-view="exercise">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8h1a4 4 0 010 8h-1"/><path d="M6 8H5a4 4 0 000 8h1"/><line x1="6" y1="12" x2="18" y2="12"/><line x1="2" y1="12" x2="4" y2="12"/><line x1="20" y1="12" x2="22" y2="12"/></svg>
                    <span>운동 처방</span>
                </button>
                <button class="nav-item" data-view="reports">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21.21 15.89A10 10 0 118 2.83"/><path d="M22 12A10 10 0 0012 2v10z"/></svg>
                    <span>리포트</span>
                </button>
                <button class="nav-item" data-view="disease-search">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                    <span>질환 검색</span>
                </button>
            </nav>

            <!-- Patient Card -->
            <div id="patient-card" class="patient-card" style="display:none;">
                <div class="section-label">현재 환자</div>
                <div class="patient-info">
                    <div class="patient-name" id="patient-name">-</div>
                    <div class="patient-meta" id="patient-meta">-</div>
                </div>
            </div>

            <!-- User Info Section -->
            <div id="user-info-section" class="user-info-section" style="display:none;">
                <div class="section-label">사용자</div>
                <div class="user-info-display">
                    <span id="user-display-name" class="user-display-name">-</span>
                    <span id="user-display-role" class="user-display-role">-</span>
                </div>
                <button id="btn-logout" class="footer-btn btn-logout" title="로그아웃">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                    로그아웃
                </button>
            </div>

            <div class="sidebar-footer">
                <button class="nav-item footer-nav-item" data-view="therapy-centers">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>
                    <span>주변 재활병원</span>
                </button>
                <button id="btn-theme-toggle" class="theme-toggle-btn" title="테마 전환">
                    <span class="theme-icon-dark">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
                    </span>
                    <span class="theme-icon-light">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
                    </span>
                    <span class="theme-label-text">다크모드</span>
                </button>
                <button id="btn-export" class="footer-btn" title="데이터 내보내기">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                    내보내기
                </button>
                <button id="btn-open-dev-settings" class="footer-btn" title="개발자 설정">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z"/></svg>
                    설정
                </button>
            </div>
        </aside>

        <!-- Main Viewer Area -->
        <main class="main-content" role="main" aria-label="주요 콘텐츠">
            <!-- 3D Viewer -->
            <div id="viewer-container" class="viewer-container">
                <canvas id="three-canvas"></canvas>
                <canvas id="viewport-overlay-canvas" class="viewport-overlay-canvas"></canvas>

                <!-- Floating Controls (tissue + camera) -->
                <div id="floating-controls" class="floating-controls">
                    <div class="floating-control-group">
                        <div class="floating-control-title">조직 레이어</div>
                        <label class="tissue-toggle">
                            <input type="checkbox" checked data-tissue="Muscle">
                            <span class="tissue-swatch" style="background:#F24D2E;"></span>
                            <span>근육</span>
                            <input type="range" class="opacity-slider" min="0" max="100" value="100" data-tissue-opacity="Muscle">
                        </label>
                        <label class="tissue-toggle">
                            <input type="checkbox" checked data-tissue="Bone">
                            <span class="tissue-swatch" style="background:#CC8C4F;"></span>
                            <span>뼈</span>
                            <input type="range" class="opacity-slider" min="0" max="100" value="100" data-tissue-opacity="Bone">
                        </label>
                    </div>
                    <div class="floating-control-group">
                        <div class="floating-control-title">카메라 뷰</div>
                        <div class="view-presets">
                            <button class="preset-btn" data-view-preset="front" title="전면 뷰">전면</button>
                            <button class="preset-btn" data-view-preset="back" title="후면 뷰">후면</button>
                            <button class="preset-btn" data-view-preset="left" title="좌측 뷰">좌측</button>
                            <button class="preset-btn" data-view-preset="right" title="우측 뷰">우측</button>
                            <button class="preset-btn" data-view-preset="top" title="상단 뷰">상단</button>
                            <button class="preset-btn" data-view-preset="reset" title="초기화">초기화</button>
                        </div>
                    </div>
                </div>

                <!-- Analysis HUD Overlay -->
                <div class="viewer-hud">
                    <div class="corner-tl"></div>
                    <div class="corner-tr"></div>
                    <div class="corner-bl"></div>
                    <div class="corner-br"></div>
                    <span class="hud-label hud-top-left">PostureView Analysis</span>
                    <span class="hud-label hud-top-right">3D Anatomical Model</span>
                    <span class="hud-label hud-bottom-left">Clinical Mode</span>
                    <span class="hud-label hud-bottom-right" id="hud-status">Ready</span>
                    <div class="scan-line"></div>
                    <div class="center-reticle"></div>
                    <div class="side-bar-left"></div>
                    <div class="side-bar-right"></div>
                    <!-- Bottom-center: Render + View mode toggles -->
                    <div class="viewer-hud-actions">
                        <div class="render-mode-toggle">
                            <button class="render-mode-btn active" data-render-mode="muscle" title="근육 뷰">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 20V10M6 20V10M12 20V4"/><path d="M2 20h20"/></svg>
                                근육
                            </button>
                            <button class="render-mode-btn" data-render-mode="skeleton" title="골격 뷰">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="5" r="3"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="21" x2="12" y2="16"/><line x1="16" y1="21" x2="12" y2="16"/><line x1="6" y1="12" x2="18" y2="12"/></svg>
                                골격
                            </button>
                            <button class="render-mode-btn" data-render-mode="xray" title="X-Ray 뷰">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 2a10 10 0 000 20" opacity="0.3"/><line x1="2" y1="12" x2="22" y2="12" stroke-dasharray="2 2"/><line x1="12" y1="2" x2="12" y2="22" stroke-dasharray="2 2"/></svg>
                                X-Ray
                            </button>
                        </div>
                        <div class="view-mode-toggle">
                            <button class="view-mode-btn active" data-view-mode="single" title="단일 뷰 (1)">
                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="1" y="1" width="12" height="12" rx="1"/></svg>
                            </button>
                            <button class="view-mode-btn" data-view-mode="dual" title="2분할 (2)">
                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="1" y="1" width="5" height="12" rx="1"/><rect x="8" y="1" width="5" height="12" rx="1"/></svg>
                            </button>
                            <button class="view-mode-btn" data-view-mode="quad" title="4분할 (4)">
                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="1" y="1" width="5" height="5" rx="1"/><rect x="8" y="1" width="5" height="5" rx="1"/><rect x="1" y="8" width="5" height="5" rx="1"/><rect x="8" y="8" width="5" height="5" rx="1"/></svg>
                            </button>
                        </div>
                    </div>
                    <!-- Bottom-left: Screenshot -->
                    <div class="viewer-hud-actions-bl">
                        <button id="btn-screenshot" class="hud-action-btn" title="3D 뷰 스크린샷">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z"/><circle cx="12" cy="13" r="4"/></svg>
                            스크린샷
                        </button>
                    </div>
                </div>
                <!-- Hover Tooltip -->
                <div id="tooltip" class="tooltip" style="display:none;">
                    <div class="tooltip-tissue" id="tooltip-tissue">-</div>
                    <div class="tooltip-region" id="tooltip-region">-</div>
                    <div class="tooltip-mapped" id="tooltip-mapped" style="display:none;"></div>
                </div>
                <!-- Realtime Pose PiP Webcam -->
                <div id="realtime-pip" class="realtime-pip" style="display:none;">
                    <div class="realtime-pip-header">
                        <span id="realtime-pulse" class="realtime-pulse"></span>
                        <span class="realtime-pip-label">LIVE</span>
                    </div>
                </div>

                <!-- Realtime Metrics Panel -->
                <div id="realtime-metrics-panel" class="realtime-metrics-panel" style="display:none;">
                    <div class="metrics-header">실시간 자세 분석</div>
                    <div class="metric-row">
                        <span class="metric-label">전방 두부</span>
                        <span class="metric-value" id="metric-fha">-</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">어깨 높이차</span>
                        <span class="metric-value" id="metric-sld">-</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">골반 기울기</span>
                        <span class="metric-value" id="metric-pt">-</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">체간 기울기</span>
                        <span class="metric-value" id="metric-tlt">-</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">무릎(좌)</span>
                        <span class="metric-value" id="metric-knee-l">-</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">무릎(우)</span>
                        <span class="metric-value" id="metric-knee-r">-</span>
                    </div>
                    <div class="metric-row metric-confidence">
                        <span class="metric-label">신뢰도</span>
                        <span class="metric-value" id="metric-confidence">-</span>
                    </div>
                </div>

                <!-- Realtime Controls Bar -->
                <div id="realtime-controls-bar" class="realtime-controls-bar">
                    <button id="btn-realtime-start" class="realtime-ctrl-btn realtime-start" title="실시간 포즈 감지 시작">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                        시작
                    </button>
                    <button id="btn-realtime-stop" class="realtime-ctrl-btn realtime-stop" style="display:none;" title="중지">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
                        중지
                    </button>
                    <button id="btn-realtime-snapshot" class="realtime-ctrl-btn" title="스냅샷 캡처">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z"/><circle cx="12" cy="13" r="4"/></svg>
                        스냅샷
                    </button>
                </div>

                <!-- Assessment Mode Banner -->
                <div id="assessment-banner" class="assessment-banner" style="display:none;">
                    <span>평가 모드 - 부위를 선택하거나 근육을 직접 클릭하세요</span>
                    <button id="btn-toggle-region-panel" class="btn-sm" style="margin-right:4px;">부위 목록</button>
                    <button id="btn-end-assessment" class="btn-sm">평가 종료</button>
                </div>
                <!-- Region Assessment Panel -->
                <div id="region-assessment-panel" class="region-assessment-panel" style="display:none;">
                    <div class="rap-header">
                        <h4>매핑 부위 평가</h4>
                        <div style="display:flex;gap:4px;align-items:center;">
                            <button id="btn-load-mapping-rap" class="btn-sm" title="매핑 파일 불러오기">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                                불러오기
                            </button>
                            <button id="btn-close-region-panel" class="btn-icon" title="닫기">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                            </button>
                        </div>
                    </div>
                    <input type="file" id="input-mapping-rap-file" accept=".json" style="display:none;">
                    <div id="region-assessment-list" class="rap-list"></div>
                </div>
                <!-- Exercise Recommendation Panel (자세분석 후 추천 운동) -->
                <div id="exercise-rec-panel" class="exercise-rec-panel" style="display:none;">
                    <div class="exercise-rec-header">
                        <div class="exercise-rec-title-area">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                            <h4>추천 운동</h4>
                            <span id="exercise-rec-count" class="exercise-rec-count"></span>
                        </div>
                        <div class="exercise-rec-actions">
                            <button id="btn-toggle-exercise-rec" class="btn-icon" title="접기/펼치기">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                            </button>
                            <button id="btn-close-exercise-rec" class="btn-icon" title="닫기">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                            </button>
                        </div>
                    </div>
                    <div id="exercise-rec-list" class="exercise-rec-list"></div>
                </div>

                <!-- Mapping Mode Banner -->
                <div id="mapping-banner" class="mapping-mode-banner" style="display:none;">
                    <span class="mapping-banner-icon">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>
                    </span>
                    <span>할당 중: <strong id="mapping-banner-region">-</strong></span>
                    <span class="mapping-banner-hint">좌클릭: 할당 | 우클릭: 제거</span>
                    <button id="btn-stop-assign" class="btn-sm">완료</button>
                </div>
            </div>

            <!-- Dashboard View -->
            <div id="dashboard-view" class="panel-view" style="display:none;">
                <div class="panel-header">
                    <h2>대시보드</h2>
                </div>
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="stat-total-patients">0</div>
                        <div class="stat-label">전체 환자</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-total-assessments">0</div>
                        <div class="stat-label">전체 평가</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-today-assessments">0</div>
                        <div class="stat-label">오늘 평가</div>
                    </div>
                </div>
                <div class="dashboard-section">
                    <h3 class="dashboard-section-title">심각도 분포</h3>
                    <div class="severity-bars" id="severity-distribution"></div>
                </div>
                <div class="dashboard-section">
                    <h3 class="dashboard-section-title">최근 환자</h3>
                    <div class="recent-patients-list" id="recent-patients-list"></div>
                </div>
                <div class="dashboard-section">
                    <h3 class="dashboard-section-title">최근 평가</h3>
                    <div class="recent-assessments-list" id="recent-assessments-list"></div>
                </div>
            </div>

            <!-- Patients View -->
            <div id="patients-view" class="panel-view" style="display:none;">
                <div class="panel-header">
                    <h2>환자 관리</h2>
                    <button id="btn-new-patient" class="btn-primary">+ 새 환자</button>
                </div>
                <div class="patient-toolbar">
                    <div class="search-box">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                        <input type="text" id="input-patient-search" placeholder="이름으로 검색...">
                    </div>
                    <div class="sort-controls">
                        <select id="select-patient-sort">
                            <option value="name-asc">이름 (ㄱ-ㅎ)</option>
                            <option value="name-desc">이름 (ㅎ-ㄱ)</option>
                            <option value="date-desc">최근 등록순</option>
                            <option value="date-asc">오래된 순</option>
                            <option value="assessments-desc">평가 많은 순</option>
                        </select>
                    </div>
                </div>
                <div id="patients-list" class="patients-list"></div>

                <!-- Patient Form -->
                <div id="patient-form" class="patient-form" style="display:none;">
                    <h3 id="patient-form-title">새 환자 등록</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>이름 *</label>
                            <input type="text" id="input-patient-name" placeholder="환자 이름">
                        </div>
                        <div class="form-group">
                            <label>생년월일</label>
                            <input type="date" id="input-patient-dob">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>성별</label>
                            <select id="select-patient-gender">
                                <option value="">-- 선택 --</option>
                                <option value="male">남성</option>
                                <option value="female">여성</option>
                                <option value="other">기타</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>직업</label>
                            <input type="text" id="input-patient-occupation" placeholder="직업">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>전화번호</label>
                            <input type="tel" id="input-patient-phone" placeholder="010-0000-0000">
                        </div>
                        <div class="form-group">
                            <label>이메일</label>
                            <input type="email" id="input-patient-email" placeholder="email@example.com">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>주요 호소 / 진단</label>
                        <input type="text" id="input-patient-diagnosis" placeholder="예: 만성 요통, 경추 디스크 등">
                    </div>
                    <div class="form-group">
                        <label>병력</label>
                        <textarea id="input-patient-history" rows="2" placeholder="과거 병력, 수술 이력 등..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>메모</label>
                        <textarea id="input-patient-notes" rows="2" placeholder="의뢰 사유 등..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button id="btn-save-patient" class="btn-primary">저장</button>
                        <button id="btn-cancel-patient" class="btn-secondary">취소</button>
                    </div>
                </div>
            </div>

            <!-- Patient Detail View -->
            <div id="patient-detail-view" class="panel-view" style="display:none;">
                <button id="btn-back-to-patients" class="btn-back">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
                    환자 목록으로
                </button>
                <div class="patient-detail-card" id="patient-detail-card">
                    <div class="patient-detail-header">
                        <div>
                            <h2 id="pd-name">-</h2>
                            <div class="pd-meta" id="pd-meta">-</div>
                        </div>
                        <div class="pd-actions">
                            <button id="btn-edit-patient-detail" class="btn-secondary btn-sm-pad">수정</button>
                            <button id="btn-export-patient" class="btn-secondary btn-sm-pad">내보내기</button>
                            <button id="btn-print-patient" class="btn-secondary btn-sm-pad">인쇄</button>
                        </div>
                    </div>
                    <div class="pd-info-grid" id="pd-info-grid"></div>
                </div>
                <div class="pd-stats" id="pd-stats"></div>
                <!-- Trend Chart -->
                <div id="trend-chart-section" class="trend-chart-section" style="display:none;">
                    <h3>평가 추이</h3>
                    <div class="trend-chart-container">
                        <canvas id="trend-chart"></canvas>
                    </div>
                </div>

                <div class="pd-assessments-section">
                    <div class="assessments-header">
                        <h3>평가 기록</h3>
                        <div class="pd-assessment-actions">
                            <button id="btn-compare-assessments" class="btn-secondary btn-sm-pad" style="display:none;">비교</button>
                            <button id="btn-new-assessment-detail" class="btn-primary btn-sm-pad">+ 새 평가</button>
                        </div>
                    </div>
                    <div id="pd-assessments-timeline" class="pd-assessments-timeline"></div>
                </div>
                <!-- Comparison Container -->
                <div id="comparison-container" class="comparison-container" style="display:none;"></div>
            </div>

            <!-- Disease Search View -->
            <div id="disease-search-view" class="panel-view" style="display:none;">
                <div class="panel-header">
                    <h2>질환 검색</h2>
                </div>
                <div class="disease-search-bar">
                    <div class="disease-search-input-wrap">
                        <svg class="disease-search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                        <input type="text" id="disease-search-input" class="disease-search-input" placeholder="질환명, 근육명, 부위명으로 검색..." autocomplete="off">
                    </div>
                    <p class="disease-search-hint">예: 디스크, 오십견, 족저근막염, 삼각근, 허리</p>
                </div>
                <div id="disease-search-results" class="disease-search-results">
                    <div class="disease-search-empty">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.3"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                        <p>검색어를 입력하면 관련 질환, 근육, 부위가 표시됩니다.</p>
                    </div>
                </div>
            </div>

            <!-- (pose-dashboard-view removed - integrated into posture-analysis-view tabs) -->

            <!-- Posture Analysis View -->
            <div id="posture-analysis-view" class="panel-view" style="display:none;">
                <div class="panel-header">
                    <h2>자세 분석</h2>
                </div>

                <!-- Posture Tabs -->
                <div class="posture-tabs">
                    <button class="posture-tab active" data-posture-tab="capture">촬영 분석</button>
                    <button class="posture-tab" data-posture-tab="dashboard">분석 대시보드</button>
                </div>

                <!-- Tab: 촬영 분석 -->
                <div class="posture-tab-content active" id="posture-tab-capture">

                <!-- 환자 선택 바 -->
                <div id="posture-patient-bar" class="posture-patient-bar">
                    <div id="posture-patient-info" class="posture-patient-info">
                        <span class="posture-patient-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                        </span>
                        <span id="posture-patient-name">환자를 선택해주세요</span>
                    </div>
                    <button id="posture-select-patient-btn" class="btn-secondary btn-sm-pad">환자 선택</button>
                </div>

                <div class="posture-layout">
                    <!-- 좌측: 입력 영역 -->
                    <div class="posture-input-area">
                        <!-- 사진 업로드 -->
                        <div id="posture-dropzone" class="posture-dropzone">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <circle cx="8.5" cy="8.5" r="1.5"/>
                                <polyline points="21 15 16 10 5 21"/>
                            </svg>
                            <p class="posture-dropzone-title">사진을 드래그하거나 선택하세요</p>
                            <p class="posture-dropzone-hint">전신이 보이는 정면/측면 사진 권장</p>
                            <button id="posture-browse-btn" class="btn-secondary btn-sm-pad">파일 선택</button>
                            <input type="file" id="posture-file-input" accept="image/*" style="display:none;">
                        </div>

                        <!-- 웹캠 -->
                        <div class="posture-webcam-controls">
                            <button id="posture-webcam-start" class="btn-secondary btn-sm-pad">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 7l-7 5 7 5V7z"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2"/></svg>
                                웹캠 촬영
                            </button>
                            <button id="posture-webcam-capture" class="btn-primary btn-sm-pad" style="display:none;">캡처</button>
                            <button id="posture-webcam-stop" class="btn-secondary btn-sm-pad" style="display:none;">정지</button>
                        </div>
                        <div id="posture-webcam-area" class="posture-webcam-area" style="display:none;">
                            <video id="posture-webcam-video" autoplay playsinline muted></video>
                        </div>

                        <!-- 이미지 프리뷰 + 오버레이 -->
                        <div id="posture-preview-area" class="posture-preview-area" style="display:none;">
                            <canvas id="posture-image-canvas" class="posture-canvas"></canvas>
                            <canvas id="posture-overlay-canvas" class="posture-overlay-canvas"></canvas>
                        </div>

                        <!-- 로딩 -->
                        <div id="posture-loading" class="posture-loading" style="display:none;">
                            <div class="posture-spinner"></div>
                            <span class="posture-loading-text">분석 중...</span>
                        </div>

                        <!-- 에러 -->
                        <div id="posture-error" class="posture-error" style="display:none;"></div>
                    </div>

                    <!-- 우측: 결과 패널 -->
                    <div id="posture-results" class="posture-results" style="display:none;">
                        <!-- 동적 렌더링 -->
                    </div>
                </div>
                </div><!-- end posture-tab-capture -->

                <!-- Tab: 분석 대시보드 -->
                <div class="posture-tab-content" id="posture-tab-dashboard">
                    <div class="pose-dashboard-inner">
                        <div class="panel-header" style="padding-top:0;">
                            <h3>포즈 분석 대시보드</h3>
                            <button id="dashboard-analyze-btn" class="btn-primary btn-sm-pad">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                                분석 갱신
                            </button>
                        </div>

                        <!-- 안내 (분석 결과 없을 때) -->
                        <div id="pose-dashboard-empty" class="pose-dashboard-empty">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.3">
                                <path d="M12 2a3 3 0 100 6 3 3 0 000-6z"/><path d="M12 8v8"/><path d="M9 22l3-6 3 6"/><path d="M6 13l6-1 6 1"/>
                            </svg>
                            <p>촬영 분석 탭에서 사진을 분석하면<br>관절 각도와 좌우 균형 데이터가 여기에 표시됩니다.</p>
                        </div>

                        <!-- 대시보드 콘텐츠 -->
                        <div id="pose-dashboard-content" class="pose-dashboard-content" style="display:none;">
                            <div class="pose-score-card">
                                <div class="pose-score-circle">
                                    <span id="balance-overall-score" class="balance-score-value">-</span>
                                    <span class="balance-score-label">균형 점수</span>
                                </div>
                                <div class="pose-score-info">
                                    <span class="pose-score-grade" id="balance-overall-grade">-</span>
                                    <p class="pose-score-desc">좌우 관절 각도의 대칭성을 종합 평가한 점수입니다. 85점 이상이면 우수합니다.</p>
                                </div>
                            </div>
                            <div class="pose-dash-section">
                                <h3 class="pose-dash-title">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                                    관절 각도 측정
                                </h3>
                                <div class="joint-angles-table-wrap">
                                    <table class="joint-angles-table">
                                        <thead><tr><th>관절</th><th>측정값</th><th>정상 범위</th><th>상태</th></tr></thead>
                                        <tbody id="joint-angles-tbody"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="pose-dash-section">
                                <h3 class="pose-dash-title">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 3h5v5M8 3H3v5M3 16v5h5M21 16v5h-5"/><path d="M21 3l-7 7M3 3l7 7M3 21l7-7M21 21l-7-7"/></svg>
                                    운동 자세 비교
                                </h3>
                                <div class="preset-comparison-header">
                                    <select id="preset-select" class="preset-select"></select>
                                    <span class="preset-match-label">적합도</span>
                                    <span id="preset-match-score" class="preset-match-value">-</span>
                                </div>
                                <div id="preset-comparison-body" class="preset-comparison-body"></div>
                            </div>
                            <div class="pose-dash-section">
                                <h3 class="pose-dash-title">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"/></svg>
                                    관절 각도 레이더
                                </h3>
                                <div class="dashboard-chart-wrapper" style="height:320px;">
                                    <canvas id="radar-chart"></canvas>
                                </div>
                            </div>
                            <div class="pose-dash-section">
                                <h3 class="pose-dash-title">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12H3M12 3v18"/></svg>
                                    좌우 균형 분석
                                </h3>
                                <div id="balance-pairs-list" class="balance-pairs-list"></div>
                            </div>
                            <div class="pose-dash-section">
                                <h3 class="pose-dash-title">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="12" width="4" height="9"/><rect x="10" y="7" width="4" height="14"/><rect x="17" y="2" width="4" height="19"/></svg>
                                    좌/우 비교
                                </h3>
                                <div class="dashboard-chart-wrapper" style="height:280px;">
                                    <canvas id="balance-chart"></canvas>
                                </div>
                            </div>
                            <div class="pose-dash-section">
                                <h3 class="pose-dash-title">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
                                    균형 점수 추이
                                </h3>
                                <div class="dashboard-chart-wrapper" style="height:240px;">
                                    <canvas id="history-chart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!-- end posture-tab-dashboard -->
            </div>

            <!-- End Assessment Modal (SOAP Notes) -->
            <div id="end-assessment-overlay" class="end-assessment-overlay" style="display:none;">
                <div class="end-assessment-modal soap-modal">
                    <div class="soap-modal-header">
                        <h3>평가 종료 - SOAP 노트</h3>
                        <button type="button" id="soap-autofill-btn" class="soap-autofill-btn" title="빈 필드에 평가 데이터 기반 자동 채우기">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                            자동채우기
                        </button>
                    </div>
                    <!-- SOAP Tabs -->
                    <div class="soap-tabs">
                        <button class="soap-tab active" data-soap-tab="subjective">S <span class="soap-tab-label">주관적</span></button>
                        <button class="soap-tab" data-soap-tab="objective">O <span class="soap-tab-label">객관적</span></button>
                        <button class="soap-tab" data-soap-tab="assessment">A <span class="soap-tab-label">평가</span></button>
                        <button class="soap-tab" data-soap-tab="plan">P <span class="soap-tab-label">계획</span></button>
                    </div>

                    <!-- S: Subjective -->
                    <div class="soap-tab-content active" id="soap-subjective">
                        <div class="form-group">
                            <label>주호소 (Chief Complaint)</label>
                            <input type="text" id="soap-chief-complaint" placeholder="환자가 호소하는 주요 증상...">
                        </div>
                        <div class="form-group">
                            <label>통증 척도 (VAS): <span id="soap-vas-value">0</span>/10</label>
                            <div class="vas-slider-container">
                                <input type="range" id="soap-pain-scale" class="vas-slider" min="0" max="10" step="1" value="0">
                                <div class="vas-labels">
                                    <span>0 통증없음</span>
                                    <span>5 중등도</span>
                                    <span>10 극심</span>
                                </div>
                            </div>
                        </div>
                        <!-- 음성 입력 영역 -->
                        <div class="form-group voice-input-group">
                            <label>
                                증상 설명
                                <div class="voice-controls">
                                    <button type="button" id="voice-mic-btn" class="voice-mic-btn" title="음성 녹음 시작">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z"/><path d="M19 10v2a7 7 0 01-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></svg>
                                        <span class="voice-mic-label">음성</span>
                                    </button>
                                    <button type="button" id="voice-autofill-btn" class="voice-autofill-btn" title="감지된 키워드를 필드에 자동 채우기" style="display:none;">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                                        자동채우기
                                    </button>
                                </div>
                            </label>
                            <textarea id="soap-symptom-desc" rows="3" placeholder="환자가 말하는 증상을 직접 입력하거나, 마이크 버튼을 눌러 음성으로 기록하세요..."></textarea>
                            <div id="voice-status" class="voice-status" style="display:none;"></div>
                            <div id="voice-tags" class="voice-tags-container" style="display:none;"></div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>통증 위치</label>
                                <input type="text" id="soap-pain-location" placeholder="예: 요추 4-5번">
                            </div>
                            <div class="form-group">
                                <label>발병 시기</label>
                                <input type="text" id="soap-onset" placeholder="예: 2주 전">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>악화 요인</label>
                                <input type="text" id="soap-aggravating" placeholder="예: 장시간 앉기">
                            </div>
                            <div class="form-group">
                                <label>완화 요인</label>
                                <input type="text" id="soap-relieving" placeholder="예: 휴식, 냉찜질">
                            </div>
                        </div>
                    </div>

                    <!-- O: Objective -->
                    <div class="soap-tab-content" id="soap-objective">
                        <div class="form-group">
                            <label>자동 소견 (3D 선택 + 자세분석)</label>
                            <textarea id="soap-auto-findings" rows="3" readonly placeholder="평가 데이터에서 자동 생성됩니다..."></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>ROM (관절가동범위)</label>
                                <input type="text" id="soap-rom" placeholder="예: 요추 굴곡 40°">
                            </div>
                            <div class="form-group">
                                <label>MMT (도수근력검사)</label>
                                <input type="text" id="soap-mmt" placeholder="예: hip flexor 4/5">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>특수검사</label>
                            <input type="text" id="soap-special-tests" placeholder="예: SLR (+) 좌측 60°">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>촉진</label>
                                <input type="text" id="soap-palpation" placeholder="예: L4-5 주위 압통">
                            </div>
                            <div class="form-group">
                                <label>보행</label>
                                <input type="text" id="soap-gait" placeholder="예: 정상 보행">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>추가 소견</label>
                            <textarea id="soap-additional-findings" rows="2" placeholder="기타 객관적 관찰 사항..."></textarea>
                        </div>
                    </div>

                    <!-- A: Assessment -->
                    <div class="soap-tab-content" id="soap-assessment">
                        <div class="form-group">
                            <label>임상 소견 (Clinical Impression)</label>
                            <textarea id="soap-clinical-impression" rows="3" placeholder="종합적인 임상 판단..."></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>진행 수준</label>
                                <select id="soap-progress-level">
                                    <option value="initial">초기 평가</option>
                                    <option value="improving">호전</option>
                                    <option value="plateau">정체</option>
                                    <option value="worsening">악화</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>기능 수준</label>
                                <input type="text" id="soap-functional-level" placeholder="예: 독립적 보행 가능">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>목표</label>
                            <textarea id="soap-goals" rows="2" placeholder="단기/장기 치료 목표..."></textarea>
                        </div>
                    </div>

                    <!-- P: Plan -->
                    <div class="soap-tab-content" id="soap-plan">
                        <div class="form-group">
                            <label>치료 계획</label>
                            <textarea id="soap-treatment" rows="2" placeholder="치료 방법, 기법 등..."></textarea>
                        </div>
                        <div class="form-group">
                            <label>홈 운동 프로그램 (HEP)</label>
                            <textarea id="soap-hep" rows="2" placeholder="가정 운동 지시 사항..."></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>빈도</label>
                                <input type="text" id="soap-frequency" placeholder="예: 주 3회">
                            </div>
                            <div class="form-group">
                                <label>기간</label>
                                <input type="text" id="soap-duration" placeholder="예: 4주">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>다음 내원</label>
                            <input type="text" id="soap-next-visit" placeholder="예: 3일 후">
                        </div>
                        <div class="form-group">
                            <label>주의사항</label>
                            <textarea id="soap-precautions" rows="2" placeholder="주의해야 할 활동, 자세 등..."></textarea>
                        </div>
                        <div class="form-group">
                            <label>의뢰</label>
                            <input type="text" id="soap-referral" placeholder="예: 정형외과 협진">
                        </div>
                    </div>

                    <div class="form-actions">
                        <button id="btn-confirm-end-assessment" class="btn-primary">저장 후 종료</button>
                        <button id="btn-cancel-end-assessment" class="btn-secondary">취소</button>
                    </div>
                </div>
            </div>

            <!-- SOAP Records View -->
            <div id="soap-records-view" class="panel-view" style="display:none;">
                <div class="panel-header">
                    <h2>치료 기록</h2>
                    <button class="btn-primary btn-sm-pad" disabled>
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                        새 기록
                    </button>
                </div>
                <div class="soap-records-toolbar">
                    <div class="search-box">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                        <input type="text" placeholder="기록 검색..." disabled>
                    </div>
                    <select disabled>
                        <option>전체 환자</option>
                    </select>
                    <input type="date" disabled>
                </div>
                <div class="placeholder-empty">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" opacity="0.2">
                        <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/>
                    </svg>
                    <h3>치료 기록이 없습니다</h3>
                    <p>환자 평가 종료 시 SOAP 노트가 자동 생성됩니다.<br>이 화면에서 모든 치료 기록을 조회하고 관리할 수 있습니다.</p>
                </div>
            </div>

            <!-- Exercise View -->
            <div id="exercise-view" class="panel-view" style="display:none;">
                <div class="panel-header">
                    <h2>운동 처방</h2>
                    <span id="ex-lib-result-count" class="panel-header-count"></span>
                </div>
                <div class="ex-lib-toolbar">
                    <div class="ex-lib-search-wrap">
                        <svg class="ex-lib-search-icon" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
                        </svg>
                        <input id="ex-lib-search" type="text" placeholder="운동명, 부위, 질환 검색..." />
                    </div>
                    <div class="ex-lib-diff-group">
                        <button class="ex-diff-btn active" data-diff="all">전체</button>
                        <button class="ex-diff-btn" data-diff="쉬움">쉬움</button>
                        <button class="ex-diff-btn" data-diff="보통">보통</button>
                        <button class="ex-diff-btn" data-diff="어려움">어려움</button>
                    </div>
                </div>
                <div class="exercise-layout">
                    <div class="exercise-sidebar">
                        <div class="exercise-category-title">부위별 카테고리</div>
                        <div id="ex-lib-categories" class="exercise-categories"></div>
                    </div>
                    <div class="exercise-main">
                        <div id="ex-lib-grid" class="ex-lib-grid"></div>
                    </div>
                </div>
            </div>

            <!-- Reports View -->
            <div id="reports-view" class="panel-view" style="display:none;">
                <div class="panel-header">
                    <h2>리포트</h2>
                </div>

                <!-- Patient Selector Bar -->
                <div class="rpt-patient-bar">
                    <label for="rpt-patient-select">환자 선택</label>
                    <select id="rpt-patient-select" class="rpt-select">
                        <option value="">환자를 선택하세요</option>
                    </select>
                </div>

                <!-- Report Type Cards -->
                <div class="rpt-card-grid">
                    <div class="rpt-type-card" data-type="assessment">
                        <div class="rpt-type-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M12 2a3 3 0 100 6 3 3 0 000-6z"/><path d="M12 8v8"/><path d="M9 22l3-6 3 6"/><path d="M6 13l6-1 6 1"/>
                            </svg>
                        </div>
                        <h3>자세분석 리포트</h3>
                        <p>부위별 심각도, SOAP 노트, 자세분석 결과를 포함한 상세 리포트</p>
                    </div>
                    <div class="rpt-type-card" data-type="progress">
                        <div class="rpt-type-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                            </svg>
                        </div>
                        <h3>경과 리포트</h3>
                        <p>평가 히스토리 기반 심각도 추이와 치료 경과 비교 분석</p>
                    </div>
                    <div class="rpt-type-card" data-type="referral">
                        <div class="rpt-type-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22 6 12 13 2 6"/>
                            </svg>
                        </div>
                        <h3>의뢰 리포트</h3>
                        <p>타 의료기관 의뢰 시 첨부할 수 있는 공식 의뢰서</p>
                    </div>
                </div>

                <!-- Report Detail Panel -->
                <div id="rpt-detail" class="rpt-detail"></div>
            </div>

            <!-- Therapy Centers View -->
            <div id="therapy-centers-view" class="panel-view" style="display:none;">
                <div class="panel-header">
                    <h2>주변 재활병원</h2>
                    <button id="therapy-refresh-btn" class="btn-secondary btn-sm-pad">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 11-2.12-9.36L23 10"/></svg>
                        새로고침
                    </button>
                </div>

                <!-- Setup Notice -->
                <div id="therapy-setup-notice" class="therapy-setup-notice" style="display:none;">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.3"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
                    <h3>네이버 API 설정 필요</h3>
                    <p>지도와 장소 검색을 사용하려면 네이버 클라우드 플랫폼에서<br>Client ID와 Client Secret을 발급받아 설정하세요.</p>
                    <button id="therapy-open-settings-btn" class="btn-primary">설정 열기</button>
                    <div class="therapy-setup-steps">
                        <h4>API 키 발급 방법</h4>
                        <ol>
                            <li>네이버 클라우드 플랫폼 (ncloud.com) 가입</li>
                            <li>Console → Application → Application 등록</li>
                            <li>Maps (Web Dynamic Map) 및 검색 (지역) API 선택</li>
                            <li>Client ID와 Client Secret 복사</li>
                            <li>개발자 설정 → 네이버 API 설정에 입력</li>
                        </ol>
                    </div>
                </div>

                <!-- Main Content -->
                <div id="therapy-main-content" class="therapy-main-content" style="display:none;">
                    <div class="therapy-layout">
                        <!-- Left: Search + Results -->
                        <div class="therapy-left-panel">
                            <div class="therapy-search-controls">
                                <div class="therapy-search-bar">
                                    <input type="text" id="therapy-search-input" class="therapy-input" placeholder="주변 재활병원 검색 (예: 물리치료, 재활의학과)" value="재활병원">
                                    <button id="therapy-search-btn" class="therapy-search-icon-btn" title="검색">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                                    </button>
                                </div>
                                <div class="therapy-sub-controls">
                                    <button id="therapy-use-location-btn" class="therapy-location-btn" title="내 위치 기반 검색">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/></svg>
                                        내 위치
                                    </button>
                                    <div id="therapy-current-location" class="therapy-current-location" style="display:none;">
                                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/></svg>
                                        <span id="therapy-location-text">-</span>
                                        <button id="therapy-clear-location-btn" class="therapy-clear-loc-btn" title="위치 해제">&times;</button>
                                    </div>
                                </div>
                            </div>
                            <div id="therapy-loading" class="therapy-loading" style="display:none;">
                                <div class="therapy-spinner"></div>
                                <span>검색 중...</span>
                            </div>
                            <div id="therapy-error" class="therapy-error" style="display:none;"></div>
                            <div id="therapy-results-list" class="therapy-results-list"></div>
                            <div id="therapy-empty" class="therapy-empty" style="display:none;">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.3"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
                                <p>검색 결과가 없습니다</p>
                            </div>
                        </div>
                        <!-- Right: Map -->
                        <div class="therapy-map-panel">
                            <div id="therapy-map-container" class="therapy-map-container">
                                <div id="therapy-naver-map" style="width:100%;height:100%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mapping Editor (right panel overlaying viewer) -->
            <div id="mapping-editor" class="mapping-editor" style="display:none;">
                <div class="mapping-editor-header">
                    <h3>매핑 에디터</h3>
                    <div style="display:flex;gap:6px;">
                        <button id="btn-import-mapping" class="btn-secondary btn-sm-pad">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                            JSON 불러오기
                        </button>
                        <button id="btn-export-mapping" class="btn-primary btn-sm-pad">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                            JSON 내보내기
                        </button>
                    </div>
                </div>
                <input type="file" id="input-mapping-editor-file" accept=".json" style="display:none;">

                <!-- Add Region -->
                <div class="me-section">
                    <div class="me-section-header">
                        <span class="section-label" style="padding:0;">부위 목록</span>
                        <button id="btn-add-region" class="mapping-btn btn-sm-pad">+ 부위 추가</button>
                    </div>
                    <!-- New Region Form -->
                    <div id="new-region-form" class="new-region-form" style="display:none;">
                        <div class="new-region-row">
                            <input type="text" id="input-region-name" placeholder="예: glutes, trapezius" class="new-region-input">
                            <select id="select-region-side" class="new-region-select">
                                <option value="">양쪽</option>
                                <option value="_l">좌측 (_l)</option>
                                <option value="_r">우측 (_r)</option>
                            </select>
                        </div>
                        <div class="new-region-row">
                            <button id="btn-save-region" class="btn-primary btn-sm-pad" style="flex:1;">생성</button>
                            <button id="btn-cancel-region" class="btn-secondary btn-sm-pad" style="flex:1;">취소</button>
                        </div>
                    </div>
                </div>

                <!-- Region List -->
                <div class="me-region-list" id="me-region-list"></div>

                <!-- Selected Region Detail -->
                <div id="me-region-detail" class="me-region-detail" style="display:none;">
                    <div class="me-detail-header">
                        <div>
                            <div class="me-detail-name" id="me-detail-name">-</div>
                            <div class="me-detail-meta" id="me-detail-meta">메쉬 0개</div>
                        </div>
                        <div class="me-detail-actions">
                            <button id="btn-start-assign" class="btn-primary btn-sm-pad">메쉬 할당</button>
                            <button id="btn-delete-region" class="btn-icon btn-danger" title="부위 삭제">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14a2 2 0 01-2 2H8a2 2 0 01-2-2L5 6"/><path d="M10 11v6"/><path d="M14 11v6"/></svg>
                            </button>
                        </div>
                    </div>
                    <div class="me-mesh-list" id="me-mesh-list"></div>
                </div>
            </div>
        </main>

        <!-- Context Panel (Right Side) -->
        <aside id="context-panel" class="context-panel" role="complementary" aria-label="선택 상세정보">
            <div class="context-header">
                <h3 id="context-title">선택 상세정보</h3>
                <button id="btn-close-context" class="btn-icon" title="닫기">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </button>
            </div>
            <div class="context-body">
                <!-- 해부학 정보 영역 -->
                <div id="anatomy-info-section" style="display:none;"></div>

                <div class="section-label" style="margin-top:8px;">평가</div>
                <div class="form-group">
                    <label>심각도</label>
                    <select id="select-severity">
                        <option value="normal">정상</option>
                        <option value="mild">경도</option>
                        <option value="moderate">중등도</option>
                        <option value="severe">중증</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>메모</label>
                    <textarea id="input-mesh-notes" rows="4" placeholder="관찰 소견, ROM 제한, 통증 정도..."></textarea>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="check-concern">
                        <span>관심 부위로 표시</span>
                    </label>
                </div>
                <button id="btn-save-selection" class="btn-primary" style="width:100%;margin-top:8px;">메모 저장</button>
            </div>
        </aside>
    </div>

    <!-- Session Timeout Warning Modal -->
    <div id="timeout-warning-modal" class="timeout-warning-overlay" style="display:none;">
        <div class="timeout-warning-modal">
            <div class="timeout-warning-icon">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"/>
                    <polyline points="12 6 12 12 16 14"/>
                </svg>
            </div>
            <h3>세션 만료 경고</h3>
            <p>2분 후 자동 로그아웃됩니다.<br>계속 사용하시려면 연장 버튼을 클릭하세요.</p>
            <button id="btn-extend-session" class="btn-primary">세션 연장</button>
        </div>
    </div>

    <!-- Exercise Video Modal -->
    <div id="video-modal-overlay" class="video-modal-overlay" style="display:none;">
        <div class="video-modal">
            <div class="video-modal-header">
                <h3 id="video-modal-title" class="video-modal-title">운동 영상</h3>
                <button id="btn-close-video" class="video-modal-close" aria-label="닫기">&times;</button>
            </div>
            <div class="video-modal-body">
                <div id="video-modal-player" class="video-modal-player"></div>
            </div>
            <div class="video-modal-footer">
                <span id="video-modal-difficulty" class="video-modal-difficulty"></span>
                <button id="video-modal-exercise-btn" class="video-modal-exercise-btn" title="웹캠으로 운동 자세 확인">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8h1a4 4 0 010 8h-1"/><path d="M6 8H5a4 4 0 000 8h1"/><line x1="6" y1="12" x2="18" y2="12"/></svg>
                    운동하기
                </button>
                <a id="video-modal-yt-link" class="video-modal-yt-link" href="#" target="_blank" rel="noopener">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
                    YouTube에서 보기
                </a>
            </div>
        </div>
    </div>

    <!-- Exercise Mode Overlay -->
    <div id="exercise-mode-overlay" class="exercise-mode-overlay" style="display:none;">
        <div class="exercise-mode-container">
            <div class="exercise-mode-header">
                <div class="em-header-left">
                    <span class="em-live-badge">LIVE</span>
                    <h3 id="exercise-mode-title">운동 모드</h3>
                    <span id="exercise-mode-preset-label" class="em-preset-label">직립 자세</span>
                </div>
                <div class="em-header-right">
                    <span id="exercise-mode-timer" class="em-timer">00:00</span>
                    <button id="btn-close-exercise-mode" class="em-close-btn" aria-label="닫기">&times;</button>
                </div>
            </div>
            <div class="exercise-mode-body">
                <!-- Reference Video Panel -->
                <div class="exercise-mode-reference" id="exercise-mode-reference">
                    <div class="em-reference-header">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                        <span>참고 영상</span>
                    </div>
                    <div class="em-reference-player" id="em-reference-player"></div>
                </div>
                <!-- Camera + Score -->
                <div class="exercise-mode-camera-area">
                    <video id="exercise-mode-video" autoplay playsinline muted></video>
                    <canvas id="exercise-mode-canvas"></canvas>
                    <div id="exercise-mode-status" class="em-status" style="display:none;">카메라 연결 중...</div>
                    <div class="em-score-overlay">
                        <svg width="100" height="100" viewBox="0 0 100 100">
                            <circle cx="50" cy="50" r="40" fill="none" stroke="rgba(255,255,255,0.15)" stroke-width="6"/>
                            <circle id="exercise-mode-score-circle" cx="50" cy="50" r="40" fill="none" stroke="#2ecc71" stroke-width="6"
                                stroke-dasharray="251.3" stroke-dashoffset="251.3" stroke-linecap="round"
                                transform="rotate(-90 50 50)"/>
                        </svg>
                        <div class="em-score-text">
                            <span id="exercise-mode-score-value" class="em-score-value">0</span>
                            <span class="em-score-label">점</span>
                        </div>
                    </div>
                </div>
                <div class="exercise-mode-feedback">
                    <div class="em-feedback-header">
                        <h4>관절 각도 피드백</h4>
                        <div class="em-legend">
                            <span class="em-legend-item"><span class="em-dot em-dot-good"></span>적합</span>
                            <span class="em-legend-item"><span class="em-dot em-dot-warning"></span>주의</span>
                            <span class="em-legend-item"><span class="em-dot em-dot-bad"></span>교정필요</span>
                        </div>
                    </div>
                    <div id="exercise-mode-joints" class="em-joints-list"></div>
                    <div class="em-tips">
                        <h5>운동 팁</h5>
                        <ul>
                            <li>전신이 카메라에 보이도록 위치하세요</li>
                            <li>밝은 조명에서 촬영하면 인식률이 높아집니다</li>
                            <li>초록색 = 올바른 자세, 빨간색 = 교정 필요</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Developer Settings Overlay -->
    <div id="dev-settings-overlay" class="dev-settings-overlay" style="display:none;">
        <div class="dev-settings-panel">
            <div class="dev-settings-header">
                <h3>개발자 설정</h3>
                <button id="btn-close-dev-settings" class="btn-icon" title="닫기">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                </button>
            </div>
            <div class="dev-settings-body">
                <div class="dev-settings-section">
                    <div class="section-label">부위 매핑</div>
                    <div class="mapping-status" id="dev-mapping-status">
                        <div class="mapping-empty">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>
                            <span>매핑 없음</span>
                        </div>
                    </div>
                    <div class="mapping-actions">
                        <button id="btn-dev-load-mapping" class="mapping-btn">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                            JSON 불러오기
                        </button>
                        <button id="btn-dev-clear-mapping" class="mapping-btn" style="display:none;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                            초기화
                        </button>
                    </div>
                    <input type="file" id="input-dev-mapping-file" accept=".json" style="display:none;">
                    <div id="dev-mapping-regions" class="mapping-regions"></div>
                </div>

                <div class="dev-settings-section">
                    <div class="section-label">네이버 API 설정</div>
                    <p class="settings-desc">지도 및 장소 검색 기능에 사용됩니다</p>
                    <div class="form-group">
                        <label>Client ID</label>
                        <input type="text" id="naver-client-id-input" class="dev-settings-input" placeholder="네이버 클라우드 Client ID">
                    </div>
                    <div class="form-group">
                        <label>Client Secret</label>
                        <input type="password" id="naver-client-secret-input" class="dev-settings-input" placeholder="검색 API용 Client Secret">
                        <small style="color:var(--text-tertiary);display:block;margin-top:4px;">백엔드 .env에서도 설정 가능</small>
                    </div>
                    <div id="naver-api-status" class="naver-api-status">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
                        <span id="naver-api-status-text">미설정</span>
                    </div>
                    <button id="btn-save-naver-api" class="btn-primary" style="width:100%;margin-top:8px;">저장</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <script type="module" src="/src/main.js"></script>
</body>
</html>
